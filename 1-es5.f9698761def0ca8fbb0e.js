function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,c=function(){};return{s:c,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{aAFz:function(t,e,n){"use strict";n.r(e),n.d(e,"ShoppingModule",(function(){return Nt}));var r={};n.r(r),n.d(r,"loadAllProducts",(function(){return l})),n.d(r,"allProductsLoaded",(function(){return p})),n.d(r,"productAdded",(function(){return b})),n.d(r,"productReceived",(function(){return f})),n.d(r,"productDeleted",(function(){return h})),n.d(r,"loadAllShops",(function(){return m})),n.d(r,"allShopsLoaded",(function(){return v})),n.d(r,"shopUpdated",(function(){return g}));var c=n("ofXK"),i=n("tyNb"),o=n("kt0X"),a=n("vkgz"),s=n("pLZG"),u=n("SxV6"),d=n("nYR2"),l=Object(o.n)("[Products Resolver] Load All Products"),p=Object(o.n)("[Load Products Effect] All Products Loaded",Object(o.s)()),b=Object(o.n)("[Add Product] Add Product",Object(o.s)()),f=Object(o.n)("[Products List] Product Received",Object(o.s)()),h=Object(o.n)("[Products List] Product Deleted",Object(o.s)()),m=Object(o.n)("[Shops Resolver] Load All Shops"),v=Object(o.n)("[Load Shops Effect] All Shops Loaded",Object(o.s)()),g=Object(o.n)("[Shopping] Shop Updated",Object(o.s)()),y=n("fXoL"),O=function(){var t={EntitiesOnly:0,Both:1,None:2};return t[t.EntitiesOnly]="EntitiesOnly",t[t.Both]="Both",t[t.None]="None",t}();function j(t){return function(e,n){var r={ids:_toConsumableArray(n.ids),entities:Object.assign({},n.entities)},c=t(e,r);return c===O.Both?Object.assign({},n,r):c===O.EntitiesOnly?Object.assign(Object.assign({},n),{entities:r.entities}):n}}function P(t,e){var n=e(t);return Object(y.W)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",e.toString()),n}function S(t){function e(e,n){var r=P(e,t);return r in n.entities?O.None:(n.ids.push(r),n.entities[r]=e,O.Both)}function n(t,n){var r,c=!1,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){c=e(r.value,n)!==O.None||c}}catch(o){i.e(o)}finally{i.f()}return c?O.Both:O.None}function r(t,e){return e.ids=[],e.entities={},n(t,e),O.Both}function c(t,e){var n=(t instanceof Array?t:e.ids.filter((function(n){return t(e.entities[n])}))).filter((function(t){return t in e.entities})).map((function(t){return delete e.entities[t]})).length>0;return n&&(e.ids=e.ids.filter((function(t){return t in e.entities}))),n?O.Both:O.None}function i(e,n){var r={};return(e=e.filter((function(t){return t.id in n.entities}))).length>0?e.filter((function(e){return function(e,n,r){var c=Object.assign({},r.entities[n.id],n.changes),i=P(c,t),o=i!==n.id;return o&&(e[n.id]=i,delete r.entities[n.id]),r.entities[i]=c,o}(r,e,n)})).length>0?(n.ids=n.ids.map((function(t){return r[t]||t})),O.Both):O.EntitiesOnly:O.None}function o(e,r){var c,o=[],a=[],s=_createForOfIteratorHelper(e);try{for(s.s();!(c=s.n()).done;){var u=c.value,d=P(u,t);d in r.entities?a.push({id:d,changes:u}):o.push(u)}}catch(b){s.e(b)}finally{s.f()}var l=i(a,r),p=n(o,r);switch(!0){case p===O.None&&l===O.None:return O.None;case p===O.Both||l===O.Both:return O.Both;default:return O.EntitiesOnly}}return{removeAll:function(t){return Object.assign({},t,{ids:[],entities:{}})},addOne:j(e),addMany:j(n),addAll:j(r),setAll:j(r),setOne:j((function(e,n){var r=P(e,t);return r in n.entities?(n.entities[r]=e,O.EntitiesOnly):(n.ids.push(r),n.entities[r]=e,O.Both)})),updateOne:j((function(t,e){return i([t],e)})),updateMany:j(i),upsertOne:j((function(t,e){return o([t],e)})),upsertMany:j(o),removeOne:j((function(t,e){return c([t],e)})),removeMany:j(c),map:j((function(t,e){return i(e.ids.reduce((function(n,r){var c=t(e.entities[r]);return c!==e.entities[r]&&n.push({id:r,changes:c}),n}),[]).filter((function(t){return t.id in e.entities})),e)}))}}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({sortComparer:!1,selectId:function(t){return t.id}},t),n=e.selectId,r=e.sortComparer,c={getInitialState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({ids:[],entities:{}},t)}},i={getSelectors:function(t){var e=function(t){return t.ids},n=function(t){return t.entities},r=Object(o.q)(e,n,(function(t,e){return t.map((function(t){return e[t]}))})),c=Object(o.q)(e,(function(t){return t.length}));return t?{selectIds:Object(o.q)(t,e),selectEntities:Object(o.q)(t,n),selectAll:Object(o.q)(t,r),selectTotal:Object(o.q)(t,c)}:{selectIds:e,selectEntities:n,selectAll:r,selectTotal:c}}},a=r?function(t,e){var n=S(t);function r(t,e){return c([t],e)}function c(e,n){var r=e.filter((function(e){return!(P(e,t)in n.entities)}));return 0===r.length?O.None:(s(r,n),O.Both)}function i(t,e){return e.entities={},e.ids=[],c(t,e),O.Both}function o(e,n){var r=[],c=e.filter((function(e){return function(e,n,r){if(!(n.id in r.entities))return!1;var c=Object.assign({},r.entities[n.id],n.changes),i=P(c,t);return delete r.entities[n.id],e.push(c),i!==n.id}(r,e,n)})).length>0;if(0===r.length)return O.None;var i=n.ids,o=[];return n.ids=n.ids.filter((function(t,e){return t in n.entities||(o.push(e),!1)})),s(r,n),!c&&o.every((function(t){return n.ids[t]===i[t]}))?O.EntitiesOnly:O.Both}function a(e,n){var r,i=[],a=[],s=_createForOfIteratorHelper(e);try{for(s.s();!(r=s.n()).done;){var u=r.value,d=P(u,t);d in n.entities?a.push({id:d,changes:u}):i.push(u)}}catch(b){s.e(b)}finally{s.f()}var l=o(a,n),p=c(i,n);switch(!0){case p===O.None&&l===O.None:return O.None;case p===O.Both||l===O.Both:return O.Both;default:return O.EntitiesOnly}}function s(n,r){n.sort(e);for(var c=[],i=0,o=0;i<n.length&&o<r.ids.length;){var a=n[i],s=P(a,t),u=r.ids[o];e(a,r.entities[u])<=0?(c.push(s),i++):(c.push(u),o++)}r.ids=c.concat(i<n.length?n.slice(i).map(t):r.ids.slice(o)),n.forEach((function(e,n){r.entities[t(e)]=e}))}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:j(r),updateOne:j((function(t,e){return o([t],e)})),upsertOne:j((function(t,e){return a([t],e)})),addAll:j(i),setAll:j(i),setOne:j((function(e,n){var c=P(e,t);return c in n.entities?(n.ids=n.ids.filter((function(t){return t!==c})),s([e],n),O.Both):r(e,n)})),addMany:j(c),updateMany:j(o),upsertMany:j(a),map:j((function(t,e){return o(e.ids.reduce((function(n,r){var c=t(e.entities[r]);return c!==e.entities[r]&&n.push({id:r,changes:c}),n}),[]),e)}))}}(n,r):S(n);return Object.assign(Object.assign(Object.assign({selectId:n,sortComparer:r},c),i),a)}var U=C({sortComparer:function(t,e){var n=new Date(t.deliveryEstDate).getTime()-new Date(e.deliveryEstDate).getTime();return n>0?1:n<0?-1:0}}),T=U.getInitialState({allProductsLoaded:!1}),A=Object(o.p)(T,Object(o.r)(r.allProductsLoaded,(function(t,e){return U.addAll(e.products,Object.assign(Object.assign({},t),{allProductsLoaded:!0}))})),Object(o.r)(r.productAdded,(function(t,e){return U.addOne(e.product,t)})),Object(o.r)(r.productReceived,(function(t,e){var n=e.update;return U.updateOne(n,t)})),Object(o.r)(r.productDeleted,(function(t,e){var n=e.id;return U.removeOne(n,t)}))),I=U.getSelectors().selectAll,k=C(),_=k.getInitialState({allShopsLoaded:!1}),w=Object(o.p)(_,Object(o.r)(r.allShopsLoaded,(function(t,e){return k.addAll(e.shops,Object.assign(Object.assign({},t),{allShopsLoaded:!0}))})),Object(o.r)(r.shopUpdated,(function(t,e){var n=e.update;return k.updateOne(n,t)}))),D=k.getSelectors().selectAll,L=Object(o.o)("products"),R=Object(o.o)("shops"),F=Object(o.q)(L,I),N=Object(o.q)(R,D),$=Object(o.q)(L,(function(t){return t.allProductsLoaded}));Object(o.q)(R,(function(t){return t.allShopsLoaded}));var E,M=((E=function(){function t(e){_classCallCheck(this,t),this.store=e,this.productsLoading=!1}return _createClass(t,[{key:"resolve",value:function(t,e){var n=this;return this.store.pipe(Object(o.t)($),Object(a.a)((function(t){n.productsLoading||t||(n.productsLoading=!0,n.store.dispatch(l()))})),Object(s.a)((function(t){return t})),Object(u.a)(),Object(d.a)((function(){return n.productsLoading=!1})))}}]),t}()).\u0275fac=function(t){return new(t||E)(y.Yb(o.h))},E.\u0275prov=y.Kb({token:E,factory:E.\u0275fac,providedIn:"root"}),E),B=n("+TCo"),V=n("lJxs"),x=n("Ta0S"),q=Object(o.o)("router"),z=x.b(q),Y=z.selectQueryParam,H=z.selectUrl;Y("carId");var G,K=n("wZkO"),W=n("Wp6s"),J=n("bSwM"),X=n("bTqV"),Z=n("NFeN"),Q=((G=function(){function t(e){_classCallCheck(this,t),this.currencyPipe=e}return _createClass(t,[{key:"transform",value:function(t,e){if(e){var n=t*Object.values(e.rates)[0];return this.currencyPipe.transform(n,Object.keys(e.rates)[0])}return null}}]),t}()).\u0275fac=function(t){return new(t||G)(y.Ob(c.d))},G.\u0275pipe=y.Nb({name:"convertCurrency",type:G,pure:!0}),G);function tt(t,e){if(1&t){var n=y.Vb();y.Ub(0,"mat-card"),y.Ub(1,"mat-card-header"),y.Ub(2,"mat-card-title"),y.Ac(3),y.Tb(),y.Ub(4,"mat-card-subtitle"),y.Ac(5),y.Tb(),y.Tb(),y.Ub(6,"mat-card-content"),y.Ub(7,"div"),y.Ac(8),y.hc(9,"convertCurrency"),y.Tb(),y.Ub(10,"div"),y.Ac(11),y.hc(12,"date"),y.Tb(),y.Tb(),y.Ub(13,"mat-card-actions",1),y.Ub(14,"mat-checkbox",2),y.cc("change",(function(){y.tc(n);var t=e.$implicit;return y.gc().checkToggled(t)})),y.Ac(15," Received "),y.Tb(),y.Ub(16,"button",3),y.cc("click",(function(){y.tc(n);var t=e.$implicit;return y.gc().deleteItem(t)})),y.Ub(17,"mat-icon"),y.Ac(18,"delete"),y.Tb(),y.Tb(),y.Tb(),y.Tb()}if(2&t){var r=e.$implicit,c=y.gc();y.Cb(3),y.Bc(r.name),y.Cb(2),y.Bc(r.shop.name),y.Cb(3),y.Cc(" Price: ",y.jc(9,5,r.price.USD,c.currencyUpdated)," "),y.Cb(3),y.Cc(" Estimated Delivery: ",y.jc(12,8,r.deliveryEstDate,"dd.MM.yyyy")," "),y.Cb(3),y.mc("checked",r.received)}}var et,nt=((et=function(){function t(e){_classCallCheck(this,t),this.store=e}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"checkToggled",value:function(t){var e=!t.received,n=Object.assign(Object.assign({},t),{received:e}),r=this.shops.find((function(e){return e.id===t.shop.id})),c=Object.assign(Object.assign({},r),{totalReceivedProducts:e?r.totalReceivedProducts+1:r.totalReceivedProducts>0?r.totalReceivedProducts-1:r.totalReceivedProducts,totalReceivedValue:{USD:e?r.totalReceivedValue.USD+t.price.USD:r.totalReceivedValue.USD-t.price.USD}}),i={id:t.shop.id,changes:c};this.store.dispatch(f({update:Object.assign({},{id:t.id,changes:n})})),this.store.dispatch(g({update:Object.assign({},i)}))}},{key:"deleteItem",value:function(t){var e=this.shops.find((function(e){return e.id===t.shop.id})),n=Object.assign(Object.assign({},e),{totalValue:{USD:e.totalValue.USD-t.price.USD},totalProducts:e.totalProducts-1,totalReceivedProducts:t.received?e.totalReceivedProducts-1:e.totalReceivedProducts,totalReceivedValue:{USD:t.received?e.totalReceivedValue.USD-t.price.USD:e.totalReceivedValue.USD}}),r={id:t.shop.id,changes:n};this.store.dispatch(h({id:t.id})),this.store.dispatch(g({update:Object.assign({},r)}))}}]),t}()).\u0275fac=function(t){return new(t||et)(y.Ob(o.h))},et.\u0275cmp=y.Ib({type:et,selectors:[["app-products-list"]],inputs:{currencyUpdated:"currencyUpdated",products:"products",shops:"shops"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"product-actions-container"],[3,"checked","change"],["mat-mini-fab","","color","warn",1,"delete-btn",3,"click"]],template:function(t,e){1&t&&y.zc(0,tt,19,11,"mat-card",0),2&t&&y.mc("ngForOf",e.products)},directives:[c.l,W.a,W.d,W.g,W.f,W.c,W.b,J.a,X.a,Z.a],pipes:[Q,c.f],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:1em;margin:1em}.product-actions-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}@media screen and (min-width:720px){[_nghost-%COMP%]{grid-template-columns:repeat(4,1fr)}}"]}),et);function rt(t,e){if(1&t&&(y.Ub(0,"mat-card",1),y.Ub(1,"mat-card-header"),y.Ub(2,"mat-card-title"),y.Ac(3),y.Tb(),y.Tb(),y.Ub(4,"mat-card-content"),y.Ub(5,"div"),y.Ac(6),y.Tb(),y.Ub(7,"div"),y.Ac(8),y.Tb(),y.Ub(9,"div"),y.Ac(10),y.hc(11,"convertCurrency"),y.Tb(),y.Ub(12,"div"),y.Ac(13),y.hc(14,"convertCurrency"),y.Tb(),y.Tb(),y.Tb()),2&t){var n=e.$implicit,r=y.gc();y.Cb(3),y.Bc(n.name),y.Cb(3),y.Cc("Total Products: ",n.totalProducts,""),y.Cb(2),y.Cc("Total Received Products: ",n.totalReceivedProducts,""),y.Cb(2),y.Cc("Total Value: ",y.jc(11,5,n.totalValue.USD,r.currencyUpdated),""),y.Cb(3),y.Cc("Total Value Received: ",y.jc(14,8,n.totalReceivedValue.USD,r.currencyUpdated),"")}}var ct,it=((ct=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ct)},ct.\u0275cmp=y.Ib({type:ct,selectors:[["app-shops-list"]],inputs:{shops:"shops",currencyUpdated:"currencyUpdated"},decls:1,vars:1,consts:[["class","shop-card",4,"ngFor","ngForOf"],[1,"shop-card"]],template:function(t,e){1&t&&y.zc(0,rt,15,11,"mat-card",0),2&t&&y.mc("ngForOf",e.shops)},directives:[c.l,W.a,W.d,W.g,W.c],pipes:[Q],styles:[".shop-card[_ngcontent-%COMP%]{margin:1em}"]}),ct),ot=n("3Pt+"),at=n("kmnG"),st=n("qFsG"),ut=n("d3UM"),dt=n("iadO"),lt=n("FKr1");function pt(t,e){if(1&t&&(y.Ub(0,"mat-option",13),y.Ac(1),y.Tb()),2&t){var n=e.$implicit;y.mc("value",n.id),y.Cb(1),y.Cc(" ",n.name," ")}}function bt(t,e){if(1&t&&(y.Ub(0,"button",14),y.Ac(1," Submit "),y.Tb()),2&t){var n=y.gc();y.mc("disabled",n.addProductForm.invalid)}}function ft(t,e){if(1&t){var n=y.Vb();y.Ub(0,"button",15),y.cc("click",(function(){return y.tc(n),y.gc().onResetForm()})),y.Ac(1," Add another product "),y.Tb()}}var ht,mt=((ht=function(){function t(e,n){_classCallCheck(this,t),this.store=e,this.cdr=n,this.addProductForm=new ot.f({name:new ot.d("asd",[ot.o.required,ot.o.minLength(1)]),shopId:new ot.d("s2",[ot.o.pattern("s[0-9]+")]),priceUSD:new ot.d(9.99,[ot.o.required,ot.o.min(.01)]),deliveryEstDate:new ot.d("",[ot.o.required])}),this.submitted=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.allShops$=this.store.pipe(Object(o.t)(N)).subscribe((function(e){return t.allShops=e}))}},{key:"onSubmit",value:function(){var t=this,e={id:"p"+Date.now(),name:this.addProductForm.value.name,price:{USD:this.addProductForm.value.priceUSD},received:!1,deliveryEstDate:new Date(this.addProductForm.value.deliveryEstDate).toISOString(),shop:this.allShops.find((function(e){return e.id===t.addProductForm.value.shopId}))},n=Object.assign(Object.assign({},e.shop),{totalValue:{USD:e.shop.totalValue.USD+e.price.USD},totalProducts:e.shop.totalProducts+1,totalReceivedProducts:e.received?e.shop.totalReceivedProducts+1:e.shop.totalReceivedProducts,totalReceivedValue:{USD:e.received?e.shop.totalReceivedValue.USD+e.price.USD:e.shop.totalReceivedValue.USD}});this.store.dispatch(b({product:Object.assign({},e)})),this.store.dispatch(g({update:{id:n.id,changes:Object.assign({},n)}})),this.submitted=!0,this.addProductForm.disable()}},{key:"onResetForm",value:function(){this.addProductForm.enable(),this.submitted=!1}},{key:"ngOnDestroy",value:function(){this.allShops$.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||ht)(y.Ob(o.h),y.Ob(y.h))},ht.\u0275cmp=y.Ib({type:ht,selectors:[["app-add-product"]],decls:26,vars:6,consts:[[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","placeholder","Product Name","formControlName","name"],["formControlName","shopId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","99.9","formControlName","priceUSD"],["matSuffix",""],["matInput","","formControlName","deliveryEstDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"form-action"],["type","submit","mat-raised-button","","color","accent",3,"disabled",4,"ngIf"],["type","reset","mat-raised-button","","color","accent",3,"click",4,"ngIf"],[3,"value"],["type","submit","mat-raised-button","","color","accent",3,"disabled"],["type","reset","mat-raised-button","","color","accent",3,"click"]],template:function(t,e){if(1&t&&(y.Ub(0,"form",0),y.cc("ngSubmit",(function(){return e.onSubmit()})),y.Ub(1,"mat-form-field",1),y.Ub(2,"mat-label"),y.Ac(3,"Product Name"),y.Tb(),y.Pb(4,"input",2),y.Tb(),y.Ub(5,"mat-form-field",1),y.Ub(6,"mat-label"),y.Ac(7,"Shop"),y.Tb(),y.Ub(8,"mat-select",3),y.zc(9,pt,2,2,"mat-option",4),y.Tb(),y.Tb(),y.Ub(10,"mat-form-field",1),y.Ub(11,"mat-label"),y.Ac(12,"Product Price"),y.Tb(),y.Pb(13,"input",5),y.Ub(14,"span",6),y.Ac(15,"$"),y.Tb(),y.Tb(),y.Ub(16,"mat-form-field",1),y.Ub(17,"mat-label"),y.Ac(18,"Delivery Estimated Date"),y.Tb(),y.Pb(19,"input",7),y.Pb(20,"mat-datepicker-toggle",8),y.Pb(21,"mat-datepicker",null,9),y.Tb(),y.Ub(23,"div",10),y.zc(24,bt,2,1,"button",11),y.zc(25,ft,2,0,"button",12),y.Tb(),y.Tb()),2&t){var n=y.rc(22);y.mc("formGroup",e.addProductForm),y.Cb(9),y.mc("ngForOf",e.allShops),y.Cb(10),y.mc("matDatepicker",n),y.Cb(1),y.mc("for",n),y.Cb(4),y.mc("ngIf",!e.submitted),y.Cb(1),y.mc("ngIf",e.submitted)}},directives:[ot.p,ot.l,ot.g,at.b,at.e,st.b,ot.b,ot.k,ot.e,ut.a,c.l,at.f,dt.b,dt.d,dt.a,c.m,lt.n,X.a],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:80%;max-width:600px;margin:3em auto}form[_ngcontent-%COMP%]   .form-action[_ngcontent-%COMP%]{margin:auto}"]}),ht);function vt(t,e){if(1&t&&(y.Pb(0,"app-products-list",6),y.hc(1,"async"),y.hc(2,"async"),y.hc(3,"async")),2&t){var n=y.gc();y.mc("currencyUpdated",y.ic(1,3,n.currencyUpdated$))("products",y.ic(2,5,n.allProducts$))("shops",y.ic(3,7,n.allShops$))}}function gt(t,e){if(1&t&&(y.Pb(0,"app-shops-list",7),y.hc(1,"async"),y.hc(2,"async")),2&t){var n=y.gc();y.mc("currencyUpdated",y.ic(1,2,n.currencyUpdated$))("shops",y.ic(2,4,n.allShops$))}}function yt(t,e){1&t&&(y.Ub(0,"mat-icon",9),y.Ac(1,"add_plus"),y.Tb(),y.Ac(2," Add Product "))}function Ot(t,e){1&t&&(y.Ub(0,"mat-tab"),y.zc(1,yt,3,0,"ng-template",8),y.Pb(2,"app-add-product"),y.Tb())}function jt(t,e){1&t&&(y.Ub(0,"div",10),y.Ac(1," No Products...\n"),y.Tb())}function Pt(t,e){1&t&&(y.Ub(0,"div",10),y.Ac(1," No Shops...\n"),y.Tb())}var St,Ct,Ut,Tt,At,It=[{path:"",component:(St=function(){function t(e){_classCallCheck(this,t),this.store=e}return _createClass(t,[{key:"ngOnInit",value:function(){this.currencyUpdated$=this.store.pipe(Object(o.t)(B.b)),this.getInitialProducts()}},{key:"onTabChanged",value:function(t){this.activeTab=t.index}},{key:"getInitialProducts",value:function(){var t=this;this.store.pipe(Object(o.t)(H),Object(u.a)()).subscribe((function(e){e.includes("received")?(t.receivedList=!0,t.allProducts$=t.store.pipe(Object(o.t)(F),Object(V.a)((function(t){return t.filter((function(t){return t.received}))}))),t.allShops$=t.store.pipe(Object(o.t)(N),Object(V.a)((function(t){return t.filter((function(t){return t.totalReceivedProducts>0}))})))):(t.receivedList=!1,t.allProducts$=t.store.pipe(Object(o.t)(F),Object(V.a)((function(t){return t.filter((function(t){return!t.received}))}))),t.allShops$=t.store.pipe(Object(o.t)(N),Object(V.a)((function(t){return t.filter((function(t){return t.totalProducts>t.totalReceivedProducts}))}))))}))}}]),t}(),St.\u0275fac=function(t){return new(t||St)(y.Ob(o.h))},St.\u0275cmp=y.Ib({type:St,selectors:[["app-products-page"]],decls:10,vars:7,consts:[[3,"focusChange"],["label","Products"],["matTabContent",""],["label","Stores"],[4,"ngIf"],["class","no-products mat-display-2",4,"ngIf"],[3,"currencyUpdated","products","shops"],[3,"currencyUpdated","shops"],["mat-tab-label",""],[1,"example-tab-icon"],[1,"no-products","mat-display-2"]],template:function(t,e){1&t&&(y.Ub(0,"mat-tab-group",0),y.cc("focusChange",(function(t){return e.onTabChanged(t)})),y.Ub(1,"mat-tab",1),y.zc(2,vt,4,9,"ng-template",2),y.Tb(),y.Ub(3,"mat-tab",3),y.zc(4,gt,3,6,"ng-template",2),y.Tb(),y.zc(5,Ot,3,0,"mat-tab",4),y.Tb(),y.zc(6,jt,2,0,"div",5),y.hc(7,"async"),y.zc(8,Pt,2,0,"div",5),y.hc(9,"async")),2&t&&(y.Cb(5),y.mc("ngIf",!e.receivedList),y.Cb(1),y.mc("ngIf",0===y.ic(7,3,e.allProducts$).length&&0===e.activeTab),y.Cb(2),y.mc("ngIf",0===y.ic(9,5,e.allShops$).length&&1===e.activeTab))},directives:[K.c,K.a,K.b,c.m,nt,it,K.d,mt,Z.a],pipes:[c.b],styles:[".no-products[_ngcontent-%COMP%]{text-align:center}"]}),St),resolve:{products:M}}],kt=((Ct=function t(){_classCallCheck(this,t)}).\u0275mod=y.Mb({type:Ct}),Ct.\u0275inj=y.Lb({factory:function(t){return new(t||Ct)},imports:[[i.h.forChild(It)],i.h]}),Ct),_t=n("snw9"),wt=n("bOdf"),Dt=n("tk/3"),Lt=((Tt=function(){function t(e){_classCallCheck(this,t),this.http=e}return _createClass(t,[{key:"getInitialProducts",value:function(){return this.http.get("assets/products.json")}},{key:"getInitialShops",value:function(){return this.http.get("assets/shops.json")}}]),t}()).\u0275fac=function(t){return new(t||Tt)(y.Yb(Dt.a))},Tt.\u0275prov=y.Kb({token:Tt,factory:Tt.\u0275fac,providedIn:"root"}),Tt),Rt=((Ut=function t(e,n,c){var i=this;_classCallCheck(this,t),this.actions$=e,this.store=n,this.shoppingService=c,this.loadedProducts$=Object(_t.c)((function(){return i.actions$.pipe(Object(_t.d)(r.loadAllProducts),Object(wt.a)((function(t){return i.shoppingService.getInitialProducts()})),Object(V.a)((function(t){return p({products:t})})))})),this.loadShops$=Object(_t.c)((function(){return i.actions$.pipe(Object(_t.d)(r.allProductsLoaded),Object(V.a)((function(){return m()})))})),this.loadedShops$=Object(_t.c)((function(){return i.actions$.pipe(Object(_t.d)(r.loadAllShops),Object(wt.a)((function(t){return i.shoppingService.getInitialShops()})),Object(V.a)((function(t){return v({shops:t})})))}))}).\u0275fac=function(t){return new(t||Ut)(y.Yb(_t.a),y.Yb(o.h),y.Yb(Lt))},Ut.\u0275prov=y.Kb({token:Ut,factory:Ut.\u0275fac}),Ut),Ft=n("vvyD"),Nt=((At=function t(){_classCallCheck(this,t)}).\u0275mod=y.Mb({type:At}),At.\u0275inj=y.Lb({factory:function(t){return new(t||At)},providers:[c.d],imports:[[c.c,Ft.a,kt,ot.n,o.j.forFeature("products",A),o.j.forFeature("shops",w),_t.b.forFeature([Rt])]]}),At)}}]);